## Задание 2. Разработка сервиса отчётов

Пользователи хотят, чтобы у них была возможность получать данные о работе своего протеза и просматривать их в виде
отчёта.

Вам нужно написать отдельный сервис для отчётов. Он будет генерировать отчёты из данных, которые собираются из разных
источников, — CRM и DB.

### Что нужно сделать

#### Задача 1. Создать архитектуру решения для подготовки и получения отчётов.

Решение должно включать в себя ETL-процесс, который объединяет данные с датчиков и данные из CRM, используя Apache
Airflow, и формирует готовую витрину отчётности в OLAP БД. Итоговый отчёт по пользователю должен быть доступен через
бэкенд-сервис API, который обозначен на исходной архитектуре.

Для подготовки архитектуры решения используйте [draw.io.](README.assets/BionicPRO_C4_model.drawio)

#### Задача 2. Разработать Airflow DAG и настроить его на запуск по расписанию.

1. Реализуйте ETL-процесс с использованием Airflow, который будет извлекать данные из CRM-системы и записывать их в базу
OLAP.
2. Подготовьте витрину — отдельную таблицу для сервиса отчётов, в которой вам предстоит объединить данные телеметрии и
данные о клиентах из CRM-системы. Для этого нужно будет сгруппировать аналитику по телеметрии в разрезе клиентов.
Спроектируйте структуру витрины таким образом, чтобы обеспечить быстрый доступ к данным по пользователям. За основу при
написании DAG можно взять материал уроков спринта.
3. Настройте расписание сбора данных и подготовки витрины.

#### Задача 3. Создайте бэкенд-часть приложения для API.

1. Выберите удобный для вас язык — Python, Java, C# или любой другой.
2. Добавьте API /reports в этот бэкенд для передачи отчётов, который будет возвращать подготовленный отчёт по заданному
пользователю. Отчёт должен запрашиваться из OLAP-базы без необходимости выполнять сложные вычисления в реальном времени.

#### Задача 4. Реализуйте ограничение доступа к эндпоинту отчётности.

Доступ к отчёту по пользователю должен предоставляться только в отношении себя.

##### Задача 5. Добавьте в UI кнопку получения отчёта и вызова эндпоинта его генерации.

**Перед отправкой задания**
- Не забудьте проверить, что:
- UI-код позволяет вызвать API для генерации отчётов.
- Реализация не позволяет генерировать отчёт пользователю, который не прошёл аутентификацию.
- Реализация позволяет генерировать авторизованному пользователю только собственный отчёт.
- Вы добавили в сервис отчётов их генерацию по запросу пользователя из OLAP: приложение должно отправлять запросы в OLAP
базу для получения отчётов.
- Вы предусмотрели генерацию отчётов только за период, который уже обработан Airflow. Обратите внимание, что пользователь
может запросить данные, которых ещё нет в OLAP.